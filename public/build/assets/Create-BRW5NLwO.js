import{Q as C,l as m,T as V,C as N,p as S,o as l,f as n,a as k,u as s,w as B,F as b,Z as q,b as r,t as i,e as E,i as u,y as h,s as f,g as v,q as y,k as M,d as D}from"./app-Cd6mMTGJ.js";/* empty css            */const F={class:"max-w-6xl mx-auto py-12"},T={class:"bg-white dark:bg-gray-800 shadow-md rounded-lg p-6"},I={class:"text-2xl font-semibold mb-4 text-gray-900 dark:text-white"},P={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},$={class:"mb-4"},L=["disabled"],O=["value"],Q={key:0,class:"text-red-500 text-sm"},Z={class:"mb-4"},j=["disabled"],z={key:0,class:"text-red-500 text-sm"},G={class:"mb-4"},H={key:0,class:"text-red-500 text-sm"},J={class:"mb-4"},K={class:"mb-4"},W={class:"bg-blue-500 text-white text-xs font-medium mr-2 px-2.5 py-0.5 rounded"},X=["onClick"],Y=["value"],tt={class:"mb-4"},et={class:"mt-4"},rt=["disabled"],st={class:"mt-4"},nt={__name:"Create",setup(at){const d=C().props,g=m(!1),_=m(!1),e=V({id:null,property_id:"",name:"",rentAmount:"",taxRate:null,recurringBills:[],notes:""});m({property_id:"",name:"",rentAmount:"",recurringBills:"",taxRate:"",notes:""}),N(()=>{d.unit&&(_.value=!0,e.id=d.unit.data.id,e.property_id=d.unit.data.property_id,e.name=d.unit.data.name,e.rentAmount=d.unit.data.rentAmount,e.taxRate=d.unit.data.taxRate,e.recurringBills=d.unit.data.recurringBills||[],e.notes=d.unit.data.notes)});const x=m(new Set(e.recurringBills.map(o=>o.type))),p=m(""),U=async()=>{g.value=!0,e.errors={};try{_.value?await e.put(route("units.update",e.id)):await e.post(route("units.store"))}catch(o){o.response&&o.response.data&&o.response.data.errors?e.errors=o.response.data.errors:console.error("An unexpected error occurred:",o)}finally{g.value=!1}},R=o=>{const t=d.utilities.data.find(c=>c.id===o);o&&t&&!x.value.has(o)&&(e.recurringBills.push({type:o,name:t.name}),x.value.add(o),p.value="")},A=o=>{const t=e.recurringBills[o].type;e.recurringBills.splice(o,1),x.value.delete(t)};return(o,t)=>{const c=S("app-layout");return l(),n(b,null,[k(s(q),{title:"Create/Edit Unit"}),k(c,null,{default:B(()=>[r("div",F,[r("div",T,[r("h1",I,i(s(e).id?"Edit Unit":"Create Unit"),1),r("form",{onSubmit:E(U,["prevent"])},[r("div",P,[r("div",$,[t[8]||(t[8]=r("label",{for:"propertyId",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Select Property",-1)),u(r("select",{id:"property","onUpdate:modelValue":t[0]||(t[0]=a=>s(e).property_id=a),class:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-gray-300",required:"",disabled:s(e).id!==null},[t[7]||(t[7]=r("option",{disabled:"",value:""},"Select Property",-1)),(l(!0),n(b,null,f(s(d).properties.data,a=>(l(),n("option",{key:a.id,value:a.id},i(a.propertyName),9,O))),128))],8,L),[[h,s(e).property_id]]),s(e).errors.property_id?(l(),n("span",Q,i(s(e).errors.property_id),1)):v("",!0)]),r("div",Z,[t[9]||(t[9]=r("label",{for:"unitName",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Unit ID/Name",-1)),u(r("input",{type:"text",id:"unitName",disabled:s(e).property_id==="","onUpdate:modelValue":t[1]||(t[1]=a=>s(e).name=a),class:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2 dark:bg-gray-700 dark:border-gray-600 dark:text-gray-300",required:""},null,8,j),[[y,s(e).name]]),s(e).errors.name?(l(),n("span",z,i(s(e).errors.name),1)):v("",!0)]),r("div",G,[t[10]||(t[10]=r("label",{for:"rentAmount",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Rent Amount",-1)),u(r("input",{type:"number",id:"rentAmount","onUpdate:modelValue":t[2]||(t[2]=a=>s(e).rentAmount=a),class:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2 dark:bg-gray-700 dark:border-gray-600 dark:text-gray-300",required:""},null,512),[[y,s(e).rentAmount]]),s(e).errors.rentAmount?(l(),n("span",H,i(s(e).errors.rentAmount),1)):v("",!0)]),r("div",J,[t[11]||(t[11]=r("label",{for:"taxRate",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Tax Rate % (optional)",-1)),u(r("input",{type:"number",id:"taxRate","onUpdate:modelValue":t[3]||(t[3]=a=>s(e).taxRate=a),placeholder:"e.g. 7.5 for residential or 16 for commercial",class:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2 dark:bg-gray-700 dark:border-gray-600 dark:text-gray-300"},null,512),[[y,s(e).taxRate]]),t[12]||(t[12]=r("p",{class:"text-gray-500 text-xs mt-1 dark:text-gray-400"}," Residential units tax rate is usually 7.5%. Commercial units tax rate is usually 16%. ",-1))]),r("div",K,[t[14]||(t[14]=r("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Other Recurring Bills (optional)",-1)),(l(!0),n(b,null,f(s(e).recurringBills,(a,w)=>(l(),n("div",{key:w,class:"flex items-center space-x-2 mb-2"},[r("span",W,i(a.name),1),r("button",{type:"button",onClick:ot=>A(w),class:"text-red-500 hover:text-red-700"}," Remove ",8,X)]))),128)),u(r("select",{"onUpdate:modelValue":t[4]||(t[4]=a=>p.value=a),onChange:t[5]||(t[5]=a=>R(p.value)),class:"block border border-gray-300 rounded-md shadow-sm p-2 dark:bg-gray-700 dark:border-gray-600 dark:text-gray-300"},[t[13]||(t[13]=r("option",{value:""},"Select bill type",-1)),(l(!0),n(b,null,f(s(d).utilities.data,a=>(l(),n("option",{key:a.id,value:a.id},i(a.name),9,Y))),128))],544),[[h,p.value]])]),r("div",tt,[t[15]||(t[15]=r("label",{for:"notes",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Notes (optional)",-1)),u(r("textarea",{id:"notes","onUpdate:modelValue":t[6]||(t[6]=a=>s(e).notes=a),rows:"3",class:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2 dark:bg-gray-700 dark:border-gray-600 dark:text-gray-300"},null,512),[[y,s(e).notes]])])]),r("div",et,[r("button",{type:"submit",class:"w-full bg-blue-500 text-white py-2 rounded-md hover:bg-blue-600 dark:bg-blue-600 dark:hover:bg-blue-700",disabled:g.value},i(s(e).id?"Update Unit":"Create Unit"),9,rt)])],32),r("div",st,[k(s(M),{href:"/units",class:"text-blue-500 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-500"},{default:B(()=>t[16]||(t[16]=[D(" Back to Units ")])),_:1})])])])]),_:1})],64)}}};export{nt as default};
