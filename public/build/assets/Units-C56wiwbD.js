import{l as r,C as M,p as F,o as l,c as D,w as k,L as m,a as V,b as e,i as b,y as S,f as n,s as U,F as N,q as A,d as R,t as i,e as T}from"./app-Cd6mMTGJ.js";import j from"./AuthenticatedLayout-DpMCrsEq.js";import{_ as H}from"./_plugin-vue_export-helper-DlAUqK2U.js";/* empty css            */const I={class:"grid grid-cols-1 gap-6 sm:grid-cols-2 md:grid-cols-4"},z=["value"],G={class:"flex justify-end"},J=["disabled"],K={key:0,class:"flex items-center"},O={key:1},Q={class:"mb-4"},W=["value"],X={key:0},Y={key:0,class:"table-container"},Z={class:"w-full bg-white table"},ee={class:"py-2"},te={class:"py-2"},oe={class:"py-2 w-2 truncate"},se={class:"py-2"},le={class:"flex gap-2"},ne=["onClick"],re=["onClick"],ae={key:1,class:"text-center py-4"},ie={key:1},ue={__name:"Units",setup(de){const g=r([]),a=r(null),w=r(null),c=r(""),p=r(""),v=r(""),f=r(!1),_=r(null),y=r(!1),u=r([]),h=r(!1),C=async()=>{try{const s=await m.get("/properties");g.value=s.data.data}catch(s){console.error("Error fetching properties:",s)}},x=async s=>{if(!s){u.value=[];return}h.value=!0;try{const d=(await m.get(`/units/${s}`)).data.data;u.value=Array.isArray(d)?d:[d],console.log("Units:",u.value),console.log("Number of units:",u.value.length)}catch(t){console.error("Error fetching units:",t)}finally{h.value=!1}},E=async()=>{if(!a.value){console.error("Property must be selected");return}y.value=!0;try{const s={name:c.value,property_id:a.value,rentAmount:p.value,notes:v.value};f.value?await m.put(`/units/${_.value}`,s):await m.post("/units",s),P(),x(a.value)}catch(s){console.error("Error submitting form:",s)}finally{y.value=!1}},P=()=>{c.value="",p.value="",v.value="",f.value=!1,_.value=null},$=s=>{c.value=s.name,p.value=s.rentAmount,v.value=s.notes,f.value=!0,_.value=s.id,a.value=s.property_id},q=async s=>{try{await m.delete(`/units/${s}`),x(a.value)}catch(t){console.error("Error deleting unit:",t)}};return M(()=>{C()}),(s,t)=>{const d=F("app-card");return l(),D(j,null,{default:k(()=>[V(d,{title:"Add or Edit Units"},{default:k(()=>[e("form",{onSubmit:T(E,["prevent"]),class:"space-y-4"},[e("div",I,[e("div",null,[t[7]||(t[7]=e("label",{for:"property",class:"block"},"Select Property:",-1)),b(e("select",{"onUpdate:modelValue":t[0]||(t[0]=o=>a.value=o),id:"property",class:"w-full p-3 border rounded focus:outline-none focus:ring-2 focus:ring-blue-500",required:""},[t[6]||(t[6]=e("option",{value:"",disabled:""},"Select a property",-1)),(l(!0),n(N,null,U(g.value,o=>(l(),n("option",{key:o.id,value:o.id},i(o.propertyName),9,z))),128))],512),[[S,a.value]])]),e("div",null,[t[8]||(t[8]=e("label",{for:"unit_name",class:"block"},"Unit Name:",-1)),b(e("input",{"onUpdate:modelValue":t[1]||(t[1]=o=>c.value=o),type:"text",id:"unit_name",placeholder:"Unit Name",class:"w-full p-3 border rounded focus:outline-none focus:ring-2 focus:ring-blue-500",required:""},null,512),[[A,c.value]])]),e("div",null,[t[9]||(t[9]=e("label",{for:"rent_amount",class:"block"},"Rent Amount:",-1)),b(e("input",{"onUpdate:modelValue":t[2]||(t[2]=o=>p.value=o),type:"number",id:"rent_amount",placeholder:"Rent Amount",class:"w-full p-3 border rounded focus:outline-none focus:ring-2 focus:ring-blue-500",required:""},null,512),[[A,p.value]])]),e("div",null,[t[10]||(t[10]=e("label",{for:"notes",class:"block"},"Notes:",-1)),b(e("textarea",{"onUpdate:modelValue":t[3]||(t[3]=o=>v.value=o),id:"notes",placeholder:"Additional Notes",class:"w-full p-3 border rounded focus:outline-none focus:ring-2 focus:ring-blue-500",rows:"1"},null,512),[[A,v.value]])])]),e("div",G,[e("button",{type:"submit",class:"px-6 py-3 text-white bg-blue-500 rounded hover:bg-blue-600 disabled:opacity-50",disabled:y.value},[y.value?(l(),n("span",K,[t[11]||(t[11]=e("svg",{class:"w-4 h-4 mr-2 animate-spin",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v4m0 8v4m8-8h-4m-8 0H4"})],-1)),R(" "+i(f.value?"Updating...":"Submitting..."),1)])):(l(),n("span",O,i(f.value?"Update":"Submit"),1))],8,J)])],32)]),_:1}),V(d,{title:"View Units"},{default:k(()=>[e("div",Q,[t[13]||(t[13]=e("label",{for:"property_view",class:"block"},"Select Property to View Units:",-1)),b(e("select",{"onUpdate:modelValue":t[4]||(t[4]=o=>w.value=o),onChange:t[5]||(t[5]=o=>x(w.value)),id:"property_view",class:"w-full p-3 border rounded focus:outline-none focus:ring-2 focus:ring-blue-500",required:""},[t[12]||(t[12]=e("option",{value:"",disabled:""},"Select a property",-1)),(l(!0),n(N,null,U(g.value,o=>(l(),n("option",{key:o.id,value:o.id},i(o.propertyName),9,W))),128))],544),[[S,w.value]])]),h.value?(l(),n("div",ie,t[15]||(t[15]=[e("p",{class:"text-center py-4"},"Loading units...",-1)]))):(l(),n("div",X,[u.value.length>0?(l(),n("div",Y,[e("table",Z,[t[14]||(t[14]=e("thead",{class:"bg-gray-100 border-b"},[e("tr",null,[e("th",{class:"py-2 text-left w-1/4"},"Unit Name"),e("th",{class:"py-2 text-left w-1/4"},"Rent Amount"),e("th",{class:"py-2 text-left w-1/4 truncate"},"Notes"),e("th",{class:"py-2 text-left w-1/4"},"Actions")])],-1)),e("tbody",null,[(l(!0),n(N,null,U(u.value,(o,B)=>(l(),n("tr",{key:o.id,class:"border-b"},[e("td",ee,i(o.name),1),e("td",te,i(o.rentAmount),1),e("td",oe,i(o.notes),1),e("td",se,[e("div",le,[e("button",{onClick:L=>$(B),class:"px-3 py-1 text-white bg-green-500 rounded hover:bg-green-600"}," Edit ",8,ne),e("button",{onClick:L=>q(o.id),class:"px-3 py-1 text-white bg-red-500 rounded hover:bg-red-600"}," Delete ",8,re)])])]))),128))])])])):(l(),n("p",ae,"No units found for the selected property."))]))]),_:1})]),_:1})}}},me=H(ue,[["__scopeId","data-v-9e0bf1e2"]]);export{me as default};
